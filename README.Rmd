---
  output: github_document
---
  
  <!-- README.md is generated from README.Rmd. Please edit that file -->
  
  ```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

<!-- badges: start -->

![R-CMD-check](https://github.com/audrey-b/BUGSnet/workflows/R-CMD-check/badge.svg)

<!-- badges: end -->

# BUGSnet

BUGSnet (Bayesian inference Using Gibbs Sampling to conduct NETwork meta-analysis) is a feature-rich R package to conduct Bayesian network meta-analyses in compliance with best practice and reporting guidelines. Bayesian analyses can be conducted with either JAGS or Stan (via cmdstanr). BUGS code for JAGS is automatically generated by the package based on the user's inputs, while Stan uses pre-compiled efficient models. Outputs are highly customizable and include network plots, tables of network characteristics, league tables and league heat plots, SUCRA plots, rankograms, forest plots, leverage plots, traceplots, posterior mean deviance comparison plots.

## Installation instructions

### 1. Install JAGS (for JAGS backend) ###

Go to the [Sourceforge](https://sourceforge.net/projects/mcmc-jags/) page.

Click on Files > JAGS > 4.x 

After selecting your operating system, download and install the most recent version of JAGS.

**Note:** JAGS is only required if you plan to use `nma.run()`. If you prefer to use Stan with `nma.run.stan()`, you can skip this step and install cmdstanr instead (see Optional Stan Installation below).

### 2. Install R ###

Download and install the most recent version of base R from [CRAN](https://cran.r-project.org/).

### 3. Install Rstudio ###

Download and install the most recent version of RStudio Desktop (free version) from [RStudio](https://www.rstudio.com/products/rstudio/download).

### 4. Install BUGSnet ###

In the RStudio console, type

```r
install.packages("remotes")
remotes::install_github("audrey-b/BUGSnet")
```

### 5. (Optional) Install cmdstanr for Stan backend ###

If you want to use Stan instead of JAGS, install cmdstanr:

```r
# Install cmdstanr from Stan R-universe
install.packages("cmdstanr", 
                 repos = c("https://stan-dev.r-universe.dev", 
                          getOption("repos")))

# Install CmdStan (the Stan compiler)
cmdstanr::install_cmdstan()
```

**Benefits of using Stan:**
- Often faster sampling via Hamiltonian Monte Carlo
- Better diagnostics (divergent transitions, tree depth)
- Easy parallel chain execution
- Particularly efficient for complex models

## Start using BUGSnet

### Quick Start with JAGS

```r
library(BUGSnet)
data(diabetes.sim)

# Prepare data
diabetes.slr <- data.prep(arm.data = diabetes.sim, 
                          varname.t = "Treatment", 
                          varname.s = "Study")

# Create model
diabetes.model <- nma.model(data = diabetes.slr,
                            outcome = "diabetes", 
                            N = "n",
                            reference = "Placebo",
                            family = "binomial",
                            link = "cloglog",
                            effects = "random",
                            time = "followup")

# Run with JAGS
results.jags <- nma.run(diabetes.model, n.iter = 10000)

# Analyze results
nma.league(results.jags)
nma.rank(results.jags)
```

### Using Stan Instead

```r
# Same data preparation and model creation as above
# Just use nma.run.stan() instead of nma.run()

results.stan <- nma.run.stan(diabetes.model, 
                              iter_warmup = 1000,
                              iter_sampling = 2000,
                              chains = 4)

# All downstream functions work the same
nma.league(results.stan)
nma.rank(results.stan)
```

See the [Stan vignette](vignettes/using_stan.Rmd) for more details on using Stan with BUGSnet.

## More Information

To start using BUGSnet, follow the vignettes available [here](https://bugsnetsoftware.github.io/).


## License

BUGSnet is available under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License (CC BY-NC-SA 4.0). Kindly review the LICENSE file. You are responsible for conforming to the terms of this license. BUGSnet is provided as-is and comes with absolutely no warranties. Commercial use is prohibited; please contact the authors for more information.


## How to cite BUGSnet?

BÃ©liveau A., Boyne D., Slater J., Brenner D. and Arora P. (2019). BUGSnet: an R package to facilitate the conduct and reporting of Bayesian network Meta-analyses. *BMC Medical Research Methodology*, 19(196).

## Contribution

Please report any [issues](https://github.com/audrey-b/BUGSnet/issues).

